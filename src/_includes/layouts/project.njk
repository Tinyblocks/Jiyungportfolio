---
layout: layouts/base.njk
---
<a href="/" class="back"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg><span>Back</span></a>
<h1 class="project__title">{{ title }}</h1>
<div class="project__meta">{{ year }} Â· {{ category | capitalize }}</div>

{% if imagesFolder %}
  {% set gallery = imagesFolder | globPaths %}
{% else %}
  {% set gallery = images %}
{% endif %}

<section class="carousel" aria-label="Images">
  <div class="carousel__main">
    <div class="carousel__rail" id="carousel-rail">
      {% for image in gallery %}
      <div class="carousel__item"><img alt="{{ title }} {{ loop.index }}" src="{{ image }}"></div>
      {% endfor %}
    </div>
    <div class="carousel__nav">
      <button class="control" onclick="prevSlide()" aria-label="Previous">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 18l-6-6 6-6"/></svg>
      </button>
      <button class="control" onclick="nextSlide()" aria-label="Next">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 6l6 6-6 6"/></svg>
      </button>
    </div>
  </div>
  <div class="carousel__thumbs">
    {% for image in gallery %}
    <div class="thumb{% if loop.first %} active{% endif %}" onclick="goToSlide({{ loop.index0 }})"><img src="{{ image }}" alt="Thumb {{ loop.index }}"></div>
    {% endfor %}
  </div>
</section>

<div class="project__description">
  {{ content | safe }}
</div>

<script>
  let currentSlide = 0;
  const slides = Array.from(document.querySelectorAll('.carousel__item'));
  const thumbs = document.querySelectorAll('.thumb');
  const rail = document.getElementById('carousel-rail');
  const nav = document.querySelector('.carousel__nav');
  const thumbsContainer = document.querySelector('.carousel__thumbs');
  if (slides.length <= 1) { nav.classList.add('hidden'); thumbsContainer.classList.add('hidden'); }
  function goToSlide(index){ currentSlide = index; const target = slides[index]; target?.scrollIntoView({behavior:'smooth', inline:'start'}); thumbs.forEach((t,i)=>t.classList.toggle('active', i===index)); }
  function nextSlide(){ currentSlide=(currentSlide+1)%slides.length; goToSlide(currentSlide); }
  function prevSlide(){ currentSlide=(currentSlide-1+slides.length)%slides.length; goToSlide(currentSlide); }
</script>
